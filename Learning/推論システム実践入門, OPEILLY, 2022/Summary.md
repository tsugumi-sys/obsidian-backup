## Ch0 前書き
- Netflixでは視聴の80％が、Amazonは売り上げの35％が推薦システム経由である。
- 推薦システムの国際会議RecSys（The ACM Conference on Recommender Systems）の規模も年々拡大している。

## Ch1 推薦システムの概要と歴史
- 推薦システムの定義: 「複数の候補から価値あるものを選び出し(1)、意思決定を支援するシステム(2)」
	- 1）前半部
		- 価値の定義によってさまざまな推薦アルゴリズムが考案される。したがって、要件に応じて、精度と計算スピードのトレードオフを加味し、アルゴリズムを選択する必要がある。
	- 2）後半部
		- 選び出したアイテムをユーザーに観覧・選択できるように、推薦の方法（サイト上で表示、メール、推薦するタイミング、UI/UX、e.t.c）を適切に設計する必要がある。
- 推薦システムの3構成要素
	- 1．インプット（データの入力）
		- ユーザー・アイテムのコンテンツ情報
			- コンテンツ情報を利用した推薦は内容ベースフィルタリング。
		- ユーザー・アイテムのインタラクション情報
			- インタラクション情報を利用した推薦は協調フィルタリング。
	- 2．プロセス（推論の計算）
		- 概要推論計算
			- 売れ筋ランキングや新着順、価格が安い順など全ユーザー共通の内容提示。
			- 導入コストが最も小さい。
			- アイテムの入れ替わりが激しい場合は有効だが、そうではない場合は常に同じ内容になるため効果が小さい。
		- 関連アイテム計算
			- コンテンツ間の類似度を計算する。
				- 類似度計算には、コンテンツ情報を利用する場合とインタラクション情報を利用する場合とがある。
				- インタラクション情報を基に計算した方が、より多彩なレコメンドとなる場合が多い。
				- プリンター購入を検討している場合は、性能や価格が類似したプリンターを提示するべきであり、購入後はプリンターを推薦するべきではない。対応カートリッジの付属品などを推薦するべき。このように、コンテキストに応じた類似度設計が必要となる。
		- パーソナライズ計算
			- ユーザーのプロフィール情報を用いたコンテンツ情報を利用する場合と、ユーザーのインタラクション情報を用いる場合がある。
			- 過去にユーザーが観覧したものをそのまま表示するのは実装コストが低く、効果的であることが知られている。
	- 3．アウトプット（推薦の掲示）
		- トップページに表示、商品購入後にメール、郵送でクーポン券など。
			- 推薦理由を添える、適切なタイミングで提示するなど工夫する必要がある。

## Chapter2 推論システムのプロジェクト

### 推論システムの構築に必要な3つのスキル
- ビジネス力
	- ユーザーのどのような行動を最大化するべきか（KPI）
- データサイエンス力
	- いきなり最新の手法を用いずに、王道の手法を使ってどのくらい精度が出るかをまず確認する。
- データエンジニアリング力
	- 計算処理の高速化、処理パイプラインの構築など。

### 推論システムプロジェクトの進め方
- 課題定義
	- データとユーザーからのヒアリングの両方のアプローチで、現状の課題の解像度を高め、各課題の重要度を決めていく。
- 仮説立案
	- 各課題を解決する方法とそれを実現するためのコストを検討し、費用対効果が高い施策から取り組む。
- データ設計・収集・加工
	- コンテンツ情報、インタラクション情報。
- アルゴリズム選定
- 学習・パラメータチューニング
	- 一般的な指標だけでなく、ユーザーの納得度を確認することが大事。
	- データのバイアスに注意する。Amazonの★5のデータには★5が付きやすい、検索エンジンでは検索上位にくるアイテムはクリックされやすいなどがバイアス。
- システム実装
	- バッチ推薦かオンライン推薦か。
- 評価・改善
	- 可能ならＡＢテストを行う。ＡＢテストが難しい場合は、時系列のトレンドを評価するなどが必要。

## Chapter3 推論システムのUI/UX

### ユーザー目線
- 適合アイテム発見
	- ユーザーが自身の目的を達成するのに適したアイテムを一つでもいいので見つけたい場合。飲食店探しなど。
	- 最も好みに一致するアイテムが見つからなくとも、ある程度好みに合っていればよい。
	- リスト形式で並べることが多い。したがって表示する情報の取捨選択が重要となる。
	- 異なる切り口でアイテムを推薦するアルゴリズムを用いて、ユーザーがタブ等で1クリックで切り替えられるようにすることで、より多彩な推薦を行うことができる。
- 適合アイテム列挙
	- ユーザーが自身の目的を達成するのに適したアイテムをできるだけすべて派遣したい場合。賃貸物件探しなど。
	- UI/UXは基本的にリスト形式。新着順など、理解しやすいルールで並べ最大限中身にユーザーが集中できるようにする。
	- 条件を絞りすぎて、ユーザーの好みに合うものが少ない場合はあえて条件を満たさないが近いアイテムを推薦することもよい（徒歩5分圏内で検索するユーザーに、徒歩7分圏内の物件を推薦するなど）。
- アイテム系列消費
	- 閲覧、消費していく中で、推薦されたアイテムの系列全体から価値を享受する場合。Spotifyなど。系列の順番（音楽の再生順など）が重要となる。
	- 同じアイテムを推薦するのも効果的。
- サービス内回遊
	- ユーザーが利用しているサービス本来の目的を達成するためではなく、ただアイテムを閲覧すること自体を目的としている場合。旅行予約サービスやホテル予約サービスなど。

### サービス提供者目線
- 新規・低利用頻度ユーザーの定着
	- 特定のユーザーに刺さるよりも、たくさんのユーザーにそこそこ刺さるようなアイテムを推薦する必要がある。概要推薦。トップランキングなど。
- サービスへの信頼性向上
	- 他のユーザーからの推薦の方が、ユーザーとしては信頼できる。サービスがより中立的な立場にあるため。
- 利用頻度向上・離脱ユーザーの復帰
	- 通知サービス。メールなど。
- 同時購入
	- 関連アイテム推薦。
- 長期的なユーザーのロイヤルティ向上
	- パーソナライズ。

### 関連トピック
- アイテムの「類似度」
	- 様々な切り口がある。
- 推薦するアイテムの目新しさ・セレンディピティ（意外性）・多様性
	- 関心×新規性を満たす推薦は刺さりやすい。
	- 同じような作風の新人作家など、意外性の要素が関心×新規性に加えることも可能。
	- 推薦されるアイテムが互いに似ていないことを評価することで、多様性を測定できる。
- 推薦アイテムの選別
	- 推薦済みのアイテムに対して再び推薦するか否か。
- 推薦理由の提示


## Chapter 4 推薦アルゴリズムの概要

### 内容ベースフィルタリング
ユーザーの好みを表す情報（ユーザープロファイル）とアイテム特徴との類似度を計算することで、好みに合ったアイテムをユーザーに推薦するアルゴリズム。

### 協調フィルタリング
収集した嗜好データに基づき、ユーザーがアイテムをどれほど好むのかという嗜好の度合いを定量的に表したものを評価値という。評価値を成分として、ユーザー×アイテムからなる行列を評価値行列という。評価値行列を用いて、もちの評価値を予測するタスクとなる。
#### メモリベース法
- ユーザー間メモリベース法
	- 推薦を受け取るユーザーと好みが似ているユーザーに着目して推薦する。
- アイテム間メモリベース法
	- 推薦を受け取るユーザーが好むアイテムと似ているアイテムに着目して推薦する。
#### モデルベース法
クラスタリング、回帰問題。分類問題として評価値を直接予測するモデル、トピックモデル、行列分解などさまざまなモデルがある。

### 運用上の注意
- コールドスタート問題
	- 情報が少ない新規ユーザーには、推薦が難しい。
- 被覆率の向上
	- サービス全体で、推薦されるアイテムに偏りが生じていないように、被覆率をあげる。
- 